import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as l,c,a as n,b as s,d as p,e as a}from"./app-bc035641.js";const i="/Lin-Note-v3/assets/image-20230227213040278-352df5cc.png",u={},r=a(`<h1 id="vue3-vs-vue2" tabindex="-1"><a class="header-anchor" href="#vue3-vs-vue2" aria-hidden="true">#</a> Vue3-vs-Vue2</h1><h2 id="vue3-æ€§èƒ½æå‡" tabindex="-1"><a class="header-anchor" href="#vue3-æ€§èƒ½æå‡" aria-hidden="true">#</a> Vue3 æ€§èƒ½æå‡</h2><p>ä¸ Vue2.x ç›¸æ¯”, mount 50% æå‡, å†…å­˜å ç”¨å° 120%</p><h2 id="vue3-æ¡†æ¶ä½“ç§¯å‡å°‘" tabindex="-1"><a class="header-anchor" href="#vue3-æ¡†æ¶ä½“ç§¯å‡å°‘" aria-hidden="true">#</a> Vue3 æ¡†æ¶ä½“ç§¯å‡å°‘</h2><ul><li>æ ¸å¿ƒä»£ç  + Composition API: 13.5kb, æœ€å° 11.75kb</li><li>æ‰€æœ‰ Runtime: 22.5kb (Vue2 æ˜¯ 32kb)</li></ul><h2 id="vue3-æ–°ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#vue3-æ–°ç‰¹æ€§" aria-hidden="true">#</a> Vue3 æ–°ç‰¹æ€§</h2><ul><li>TS é‡å†™ Diff ç®—æ³•, ä½¿ç”¨ Proxy æ€§èƒ½æ›´ä¼˜, æ¡†æ¶ä½“ç§¯æ›´å°</li><li>æ–°çš„ Compiler, é€šè¿‡æ³¨é‡Šæ ‡è®°æå‡æ¡†æ¶æ€§èƒ½</li><li>Composition API, æ¨¡å—åŒ–åŠŸèƒ½ä»£ç , æ‘’å¼ƒ <code>this</code></li><li>æ›´å¥½çš„æŒ‰éœ€åŠ è½½ (å¾—ç›Šäº Tree Shaking), Webpack æ‰“åŒ…æ—¶èƒ½æ›´å¥½çš„æŒ‰éœ€æ‰“åŒ…</li><li>æ–°å¢: Fragmentã€Teleportã€Suspense</li><li>Vite å¼€å‘å·¥å…·</li></ul><blockquote><p>ä¸ºä»€ä¹ˆæ‘’å¼ƒ <code>this</code> ?</p><p><code>this</code> çš„æŒ‡å‘ä¸æ˜ç¡®, ä¸æ¸…æ¥šä»£ç çš„è°ƒç”¨åœ¨å“ªé‡Œ</p><p>é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹, è™½ç„¶æ¯”è¾ƒåæ¿€, ä½†æ˜¯å¸¦æ¥çš„å¥½å¤„å°±æ˜¯ç±»å‹æ¨å¯¼å˜å¾—éå¸¸ç®€å•, è€Œä¸”å®¹æ˜“ç†è§£, ç±»ä¼¼äº <code>python</code></p></blockquote><h2 id="å“åº”å¼åŸç†" tabindex="-1"><a class="header-anchor" href="#å“åº”å¼åŸç†" aria-hidden="true">#</a> å“åº”å¼åŸç†</h2><p><strong>Proxy åŸç†</strong></p><ul><li>proxy ä»£æ›¿ Object.defineProperty() å®ç°æ•°æ®å“åº”</li><li>Proxy æ˜¯ ES6 çš„è¯­æ³•, æœ‰æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜</li></ul><p><strong>Proxy ä»‹ç»</strong></p><p>MDN: Proxy å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸º (å¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰)</p><ul><li>æ‹¦æˆªåŠŸèƒ½</li><li>æä¾›å¯¹è±¡è®¿é—®</li><li>å¯ä»¥é‡å†™å±æ€§æˆ–è€…æ„é€ å‡½æ•°</li></ul><p><strong>Proxy ä¸ºä»€ä¹ˆ æ¯” Object.defineProperty æ›´å¥½</strong></p><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¸”å£°æ˜å±æ€§, ä½¿ç”¨ Object.defineProperty å»ç›‘å¬å±æ€§çš„å˜åŒ–, ä¹Ÿå°±æ˜¯ä¸ºæ¯ä¸ªå±æ€§èµ‹äºˆ getã€set æ–¹æ³•, å› ä¸ºå¯¹è±¡å¯èƒ½æ˜¯å¤šå±‚å¯¹è±¡, æ‰€ä»¥å®ƒéœ€è¦æ·±åº¦å»éå†æ¯ä¸ªå±æ€§, è¿™ä¸ªæ—¶å€™éå†å·²ç»å®Œæˆäº†ã€‚ ä½†æ˜¯æ–°å¢ï¼Œåˆ é™¤å±æ€§, è¿™ä¸ªæ—¶å€™ä¸ä¼šå¯¹æ–°å¢ã€åˆ é™¤å±æ€§èµ‹äºˆ getã€set æ–¹æ³•ã€‚æ‰€ä»¥, Vue2 æ‰æ— æ³•å¯¹å¯¹è±¡å±æ€§è¿›è¡Œæ–°å¢ã€åˆ é™¤ã€‚æ‰€ä»¥å¼€å‘çš„æ—¶å€™ä½¿ç”¨, Vue2 éƒ½æ˜¯å…ˆå£°æ˜å±æ€§, å†å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚</p><p>Proxy æ˜¯ä¸æ˜¯å¯¹åŸå§‹ä¸ªå¯¹è±¡è¿›è¡Œç›‘å¬, è€Œæ˜¯å»ç›‘å¬åŸå§‹å¯¹è±¡çš„ä»£ç†å¯¹è±¡, ä»£ç†å¯¹è±¡åªè¦å˜åŒ–, å°±ä¼šè§¦å‘å¯¹åº” getã€set å‡½æ•°ã€‚</p><p><strong>ref vs reactive ç”¨æ³•ä¸åŒºåˆ«</strong></p><p>å¦‚ä½•å®šä¹‰ä¸€ä¸ªå“åº”å¼å˜é‡æˆ–æ•°ç»„ã€å¯¹è±¡?</p><p>ä½¿ç”¨ refã€reactive</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// å®šä¹‰</span>
<span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;Lin&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    lists<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        text<span class="token operator">:</span> <span class="token string">&#39;zhang san&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        text<span class="token operator">:</span> <span class="token string">&#39;li si&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ä½¿ç”¨</span>
total<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;Pin&#39;</span>
state<span class="token punctuation">.</span>lists<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¯¹äºæ•°ç»„çš„æ“ä½œ</strong></p><p>vue2 ä¸­ä¸èƒ½ç›´æ¥æ“ä½œæ•°ç»„, å¦‚ <code>this.arr[0] = 233</code>, è¿™æ ·åšçš„è¯, æ•°ç»„æ”¹å˜äº†, ä½†æ˜¯è§†å›¾ä¸ä¼šæ¸²æŸ“</p><p>ä½†æ˜¯ vue3 ä¸­å°±å¯ä»¥ç›´æ¥æ“ä½œæ•°ç»„, ä¸”è§†å›¾ä¼šæ¸²æŸ“, è¿™æ˜¯ vue3 çš„ä¸€ä¸ªæ–°çš„ç‰¹ç‚¹</p><p><strong>readonly ä½¿ç”¨æ–¹æ³•åŠåœºæ™¯</strong></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> copy <span class="token operator">=</span> <span class="token keyword">readonly</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç”¨æ¥åšå“åº”æ€§è¿½è¸ª</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>copy<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// æ›´æ”¹æºå±æ€§ä¼šè§¦å‘å…¶ä¾èµ–çš„ä¾¦å¬å™¨</span>
original<span class="token punctuation">.</span>count<span class="token operator">++</span>

<span class="token comment">// æ›´æ”¹è¯¥åªè¯»å‰¯æœ¬å°†ä¼šå¤±è´¥ï¼Œå¹¶ä¼šå¾—åˆ°ä¸€ä¸ªè­¦å‘Š</span>
copy<span class="token punctuation">.</span>count<span class="token operator">++</span> <span class="token comment">// warning!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœºæ™¯: æ¯”å¦‚, å­ç»„ä»¶ä½¿ç”¨çˆ¶ç»„ä»¶çš„æ•°æ®, ä½†æ˜¯ä¸æƒ³å­ç»„ä»¶å»ä¿®æ”¹è¿™ä¸ªæ•°æ®, å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§äº†</p><p><strong>toRefs çš„ä½¿ç”¨</strong></p><p>ä¸»è¦ä½œç”¨æ˜¯ä»ç»„åˆé€»è¾‘å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå“åº”å¼çš„å¯¹è±¡</p><p><strong>reactive <code>æ·±</code> è½¬æ¢å“åº”å¼å‰¯æœ¬, readonly åˆ›å»ºåªè¯»å¯¹è±¡</strong></p><p><strong>isProxy/isReactive/isReadonly &amp; toRaw/toRef/toRefs</strong></p><p>toRaw: å°†å“åº”å¼å¯¹è±¡è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡</p><p>toRefs: å°†éå“åº”å¼å¯¹è±¡è½¬æ¢ä¸ºå“åº”å¼çš„æ˜ å°„</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> å…¶ä»– API ä»£è¡¥å……</label></li></ul><h2 id="compiler-åŸç†ç¯‡" tabindex="-1"><a class="header-anchor" href="#compiler-åŸç†ç¯‡" aria-hidden="true">#</a> Compiler åŸç†ç¯‡</h2><p><strong>ä¼˜åŒ– - 1</strong></p><ul><li>é™æ€ Node ä¸å†ä½œæ›´æ–°å¤„ç† (hoistStatic -&gt; SSRä¼˜åŒ–)</li><li>é™æ€ç»‘å®šçš„ class, id ä¸å†ä½œæ›´æ–°å¤„ç†</li><li>ç»“åˆæ‰“åŒ…æ ‡è®° PatchFlag, è¿›è¡Œæ›´æ–°åˆ†æ (åŠ¨æ€ç»‘å®š)</li></ul><p><strong>ä¼˜åŒ– - 2</strong></p><ul><li>äº‹ä»¶ç›‘å¬å™¨ Cache ç¼“å­˜å¤„ç† (cacheHandles)</li><li>hoistStatic è‡ªåŠ¨é’ˆå¯¹å¤šé™æ€èŠ‚ç‚¹è¿›è¡Œä¼˜åŒ–, è¾“å‡ºå­—ç¬¦ä¸²</li></ul><h2 id="diff-ç®—æ³•æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#diff-ç®—æ³•æ¯”è¾ƒ" aria-hidden="true">#</a> Diff ç®—æ³•æ¯”è¾ƒ</h2><p><strong>Vue2 Diff ç®—æ³•</strong></p><ul><li>æ–°æ—§èŠ‚ç‚¹å¯¹æ¯”, å…ˆä»å‰é¢å¯¹æ¯”, å†ä»åé¢å¯¹æ¯”, æŠ½ç¦»å‡ºä¸€æ ·çš„éƒ¨åˆ†</li><li>ä»ç¬¬ä¸€å…ƒç´ å¼€å§‹å¯¹æ¯”, é€šè¿‡ç§»ä½, æ–°å¢æ¥å®ç°æ›´æ–°</li></ul><hr><p><strong>Vue3 Diff ç®—æ³•</strong></p><ul><li>patchChildren æ ¹æ®æ˜¯å¦å­˜åœ¨ key è¿›è¡ŒçœŸæ­£çš„ diff (é™æ€æ ‡è®° - æ ‡è®°ä¼šåŠ¨æ€æ”¹å˜çš„èŠ‚ç‚¹)</li><li>å¤ç”¨çœŸå®çš„ dom èŠ‚ç‚¹, é¿å…ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€</li><li>ä¹±åºæ—¶, å…ˆæ‰¾åˆ°æœ€é•¿é€’å¢å­åºåˆ—ä½œä¸ºå‚è€ƒ, ç„¶åå†ç§»åŠ¨, å‡å°‘æ¯”è¾ƒæ¬¡æ•°, æé«˜äº†æ€§èƒ½ (é‡ç‚¹)</li></ul><p><strong>æ ¸å¿ƒå°±æ˜¯å­èŠ‚ç‚¹ä¹‹é—´çš„å¯¹æ¯”, ä¸»è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µ</strong></p><ul><li>å­èŠ‚ç‚¹æ—  key (åªä½œé•¿åº¦å¯¹æ¯”)</li><li>å­èŠ‚ç‚¹æœ‰ key</li></ul><p><strong>æ—  key æ—¶, æˆ‘ä»¬å¸Œæœ›å°½å¯èƒ½å¤ç”¨è€èŠ‚ç‚¹</strong></p><ul><li>æ¯”è¾ƒæ–°è€ children çš„ length è·å–æœ€å°å€¼</li><li>å¯¹äºå…¬å…±éƒ¨åˆ†, è¿›è¡Œä»æ–° patch å·¥ä½œ</li><li>å¦‚æœé•¿äºæ—§, åˆ™æ–°å¢; å¦‚æœçŸ­äºæ—§, åˆ™åˆ é™¤</li></ul><h2 id="watch-ä¸-watcheffect" tabindex="-1"><a class="header-anchor" href="#watch-ä¸-watcheffect" aria-hidden="true">#</a> watch ä¸ watchEffect</h2><p><strong>watch åœ¨ vue2ã€vue3 ä¸­åŒºåˆ«</strong></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// vue3 ä¸­çš„å†™æ³•</span>
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span>count<span class="token punctuation">,</span> prevCount<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// vue2 ä¸­çš„å†™æ³•</span>
watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">counter</span> <span class="token punctuation">(</span>newval<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> oldval<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newval<span class="token punctuation">,</span> oldval<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,52),d={href:"https://blog.csdn.net/Liushiliu104/article/details/119987818",target:"_blank",rel:"noopener noreferrer"},k=a(`<p><strong>watchEffect çš„ä½¿ç”¨</strong></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> total <span class="token operator">=</span> counter<span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token number">2</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;total is:&#39;</span> <span class="token operator">+</span> total<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    flush<span class="token operator">:</span> <span class="token string">&#39;pre&#39;</span><span class="token punctuation">,</span> <span class="token comment">// pre | post | sync (è§¦å‘çš„æ—¶æœºè®¾ç½®)</span>
    <span class="token function-variable function">onTrack</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;onTrack -&gt; e&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>watch vs watchEffect</strong></p><ul><li>éƒ½å¯ä»¥ç›‘å¬å“åº”å¼å¯¹è±¡çš„å˜åŒ–, ä»è€Œæ‰§è¡Œå›è°ƒ</li><li>watchEffect ä¼šé»˜è®¤æ‰§è¡Œä¸€æ¬¡, è€Œ watch ä¸ä¼š, å¿…é¡»äº‹ä»¶è§¦å‘</li><li>watchEffect åªæ¥æ”¶å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°</li></ul><h2 id="è®¡ç®—å±æ€§-computed-çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#è®¡ç®—å±æ€§-computed-çš„ä½¿ç”¨" aria-hidden="true">#</a> è®¡ç®—å±æ€§ (computed) çš„ä½¿ç”¨</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// vue3 </span>
<span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> num1<span class="token punctuation">.</span>value <span class="token operator">+</span> num2<span class="token punctuation">.</span>value
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 	<span class="token function-variable function">get</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  	<span class="token keyword">return</span> num1<span class="token punctuation">.</span>value <span class="token operator">*</span><span class="token number">10</span>
 	<span class="token punctuation">}</span><span class="token punctuation">,</span>
 	<span class="token function-variable function">set</span><span class="token operator">:</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  	<span class="token keyword">return</span> num1<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token operator">/</span><span class="token number">10</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// vue2</span>
computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">total</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ğŸš€ ~ file: HomeView.vue:39 ~ total ~ counter:&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>counter <span class="token operator">*</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  	total<span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// num1å€¼æ”¹å˜æ—¶è§¦å‘</span>
       	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num1 <span class="token operator">*</span> <span class="token number">10</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// mulå€¼è¢«æ”¹å˜æ—¶è§¦å‘</span>
       	<span class="token keyword">this</span><span class="token punctuation">.</span>num1 <span class="token operator">=</span> value <span class="token operator">/</span><span class="token number">10</span>
      <span class="token punctuation">}</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¼ é€’å‚æ•°</span>
<span class="token keyword">const</span> sltEle <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;index&#39;</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),v={href:"https://www.cnblogs.com/web-learn/p/15601335.html#:~:text=%E5%9C%A8vue2%E4%B8%AD%EF%BC%8Ccomputed",target:"_blank",rel:"noopener noreferrer"},m=a(`<h2 id="å¦‚ä½•åœ¨-ts-ä¸­é…ç½®-this-æŒ‡å‘é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•åœ¨-ts-ä¸­é…ç½®-this-æŒ‡å‘é—®é¢˜" aria-hidden="true">#</a> å¦‚ä½•åœ¨ ts ä¸­é…ç½® this æŒ‡å‘é—®é¢˜</h2><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dom.iterable&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripthost&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token property">&quot;noImplicitThis&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// é…ç½®è¿™ä¸ªå±æ€§ä¸º false å°±ä¸ä¼šå†æ£€æŸ¥ this æŒ‡å‘é—®é¢˜</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="implicitly-has-an-any-type-è§£å†³æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#implicitly-has-an-any-type-è§£å†³æ–¹æ³•" aria-hidden="true">#</a> implicitly has an â€˜anyâ€˜ type è§£å†³æ–¹æ³•</h2><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// é…ç½®è¿™ä¸ªå±æ€§å°±å¯ä»¥å¿½ç•¥ any æŠ¥é”™äº†</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;forceConsistentCasingInFileNames&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;useDefineForClassFields&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;webpack-env&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vue3-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#vue3-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°" aria-hidden="true">#</a> Vue3 ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</h2><p><strong>è°ƒè¯•æ—¶ä½¿ç”¨çš„é’©å­å‡½æ•°</strong></p><p>onRenderTracked() å½“ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­è¿½è¸ªåˆ°å“åº”å¼ä¾èµ–æ—¶è°ƒç”¨ (è°ƒç”¨ä¸€æ¬¡)</p><p>onRenderTriggered() å½“å“åº”å¼ä¾èµ–çš„å˜æ›´è§¦å‘äº†ç»„ä»¶æ¸²æŸ“æ—¶è°ƒç”¨ (æ”¹å˜å°±è°ƒç”¨)</p><p><strong>Vue3 é€‰é¡¹å¼ API åç§°çš„æ”¹åŠ¨</strong></p><p>destroy æ”¹ä¸º unmounted</p><p>beforeDestroy æ”¹ä¸º beforeUnmounted</p><p><strong>setup() ä¼˜å…ˆäº beforeCreate æ‰§è¡Œ</strong></p><p><strong>é€‰é¡¹å¼ API çš„ç”Ÿå‘½å‘¨æœŸ, åŠé’©å­å‡½æ•° (é’©å­å‡½æ•°å°±æ˜¯åœ¨ ç”Ÿå‘½å‘¨æœŸå‰é¢ åŠ ä¸Š <code>on</code> è€Œå·²)</strong></p><figure><img src="`+i+`" alt="image-20230227213040278" tabindex="0" loading="lazy"><figcaption>image-20230227213040278</figcaption></figure><h2 id="suspense-ç®€ä»‹-å°è£…errorcaptureç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#suspense-ç®€ä»‹-å°è£…errorcaptureç»„ä»¶" aria-hidden="true">#</a> Suspense ç®€ä»‹ &amp; å°è£…ErrorCaptureç»„ä»¶</h2><p><strong>Suspense çš„åŸºæœ¬ä½¿ç”¨</strong></p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- å¼‚æ­¥åŠ è½½çš„ç»„ä»¶ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>User</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- åŠ è½½è¿‡ç¨‹ä¸­çš„æç¤º --&gt;</span>
        loadding ...
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å°è£… ErrorCapture ç»„ä»¶</strong></p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token comment">&lt;!-- ErrorCapture ç»„ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:err</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fallback<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> onErrorCaptured<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>

        <span class="token function">onErrorCaptured</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            error<span class="token punctuation">.</span>value <span class="token operator">=</span> err <span class="token keyword">as</span> unknown <span class="token keyword">as</span> string
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>


        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            error
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token comment">&lt;!--ä½¿ç”¨ ErrorCapture ç»„ä»¶--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SuspenseWithError</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#error</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{err}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ err }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>User</span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- è¿™ä¸ªæ˜¯è‡ªå·±å®šä¹‰çš„ç»„ä»¶ --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
        loadding ...
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SuspenseWithError</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> User <span class="token keyword">from</span> <span class="token string">&#39;@/components/User.vue&#39;</span>
<span class="token keyword">import</span> SuspenseWithError <span class="token keyword">from</span> <span class="token string">&#39;./components/SuspenseWithError.vue&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    User<span class="token punctuation">,</span>
    SuspenseWithError
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="teleport-ç»„ä»¶ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#teleport-ç»„ä»¶ä»‹ç»" aria-hidden="true">#</a> teleport ç»„ä»¶ä»‹ç»</h2><p><strong>ä½¿ç”¨åœºæ™¯</strong></p><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ”¾ç½®å…ƒç´ åˆ°æ ¹èŠ‚ç‚¹ä»¥å¤–çš„ä½ç½® ( ä¾‹å¦‚ å…¨å±é®ç½© )</p><p><strong>teleport ç»„ä»¶</strong></p><ul><li>æ§åˆ¶éƒ¨åˆ† DOM è„±ç¦»æ ¹èŠ‚ç‚¹</li><li>å¯ä»¥ä½¿ç”¨æœ¬åœ°åŒ–é€»è¾‘æ§åˆ¶ç»„ä»¶</li><li>é€‚ç”¨äº fixed æˆ–è€… ç»å¯¹å®šä½çš„ç»„ä»¶</li></ul><p><strong>Teleport çš„ to å±æ€§å¯ä»¥æŒ‡å®šçš„å¯¹è±¡æ ¼å¼</strong></p><ul><li>id -&gt; <code>&lt;teleport to = â€œ#idâ€ &gt;</code></li><li>claass -&gt; <code>&lt;teleport to = â€œ.classNameâ€ &gt;</code></li><li>data -&gt; <code>&lt;teleport to = &quot;[data-meta]&quot; &gt;</code></li><li>åŠ¨æ€ -&gt; <code>&lt;teleport :to = &quot;props&quot; &gt;</code></li></ul><p><strong>Teleport çš„åŸºæœ¬èƒ½ä½¿ç”¨</strong></p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token comment">&lt;!-- ä½¿ç”¨ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>#end-of-body<span class="token punctuation">&#39;</span></span> <span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- é€šè¿‡ id æ ‡ç­¾ --&gt;</span>
    hello teleport to end of body
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    This should be at the top. 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- æŒ‡å®šæ ‡ç­¾ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>end-of-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- è®¾ç½® id --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Teleport ç›¸å…³ç‰¹æ€§</strong></p><ul><li><p><code>:disabled = true</code> (æ˜¾ç¤ºåœ¨ app ä¸­)</p></li><li><p><code>:disabled = false</code> (æ˜¾ç¤ºåœ¨æŒ‡å®šå…ƒç´ å†…)</p></li><li><p><code>disable</code> ä¸ä¼šéšè—å…ƒç´ , è¦éšè—å…ƒç´ å¯ä»¥ä½¿ç”¨ <code>v-if</code></p></li></ul><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>#end-of-body<span class="token punctuation">&#39;</span></span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!toggle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    hello from teleport
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>toggle value: {{ toggle }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    This should be at the top.
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggleHandle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>toggleHandle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ul><li>teleport ä¼ é€ DOM åˆ° to å±æ€§æŒ‡å®šçš„ç»‘å®šä½ç½®</li><li>teleport æ˜¯ä¿æŒçŠ¶æ€çš„ (æ¯”å¦‚è§†é¢‘æ’­æ”¾çŠ¶æ€ä¼šè¢«ä¿æŒ, ä¸ä¼šä¸­æ–­æ’­æ”¾), ä½¿ç”¨ disbled å±æ€§å…³é—­ä¼ é€, <code>disble = true</code> å…³é—­</li><li>teleport ä¸­å¯ä»¥ä¼ é€å¤šç»„ DOM, æŒ‰ç…§å…ˆåé¡ºåº <code>append</code></li></ul><h1 id="vue2-ä¸-vue3-çš„æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#vue2-ä¸-vue3-çš„æ€»ç»“" aria-hidden="true">#</a> Vue2 ä¸ Vue3 çš„æ€»ç»“</h1><h2 id="ä¸ºä»€ä¹ˆç”¨-proxy-api-ä»£æ›¿-defineproperty-api" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆç”¨-proxy-api-ä»£æ›¿-defineproperty-api" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆç”¨ Proxy API ä»£æ›¿ defineProperty API</h2><p>Vue2 defineProperty API å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå¢åŠ ä¸åˆ é™¤å±æ€§éƒ½æ²¡æœ‰å“åº”å¼, ç”¨ API (popã€push) æ“ä½œæ•°ç»„ä¹Ÿæ²¡æœ‰å“åº”å¼, æ•°ç»„ç”¨ä¸‹æ ‡ä¿®æ”¹å°±å¯ä»¥ <code>arr[0] = 100</code></p><p>Vue3 Proxy API è§£å†³äº† defineProperty çš„ä¸è¶³, å¯ä»¥å¯¹å¯¹è±¡å¢åŠ ã€åˆ é™¤å±æ€§, å¯ä»¥ä½¿ç”¨æ•°ç»„æ“ä½œ API</p><h2 id="api-ä¸Šçš„åŒºåˆ«-æˆ–è€…è¯´-è¯­æ³•ä¸Šçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#api-ä¸Šçš„åŒºåˆ«-æˆ–è€…è¯´-è¯­æ³•ä¸Šçš„åŒºåˆ«" aria-hidden="true">#</a> API ä¸Šçš„åŒºåˆ« æˆ–è€…è¯´ è¯­æ³•ä¸Šçš„åŒºåˆ«</h2><p>setup ä¸­æ²¡æœ‰ this</p><p>å…·æœ‰ç±»å‹æ¨å¯¼, ä¹Ÿå°±æ˜¯åœ¨ç¼–è¾‘å™¨ä¸­é¼ æ ‡æ”¾åœ¨å˜é‡æˆ–è€…æ–¹æ³•ä¸Šèƒ½æ˜¾ç¤ºå…¶ç±»å‹, ä¹Ÿå°±æ˜¯è¯´ vue3 èƒ½è‡ªåŠ¨æ¨å¯¼å‡ºç±»å‹</p><h2 id="vue3-api-åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#vue3-api-åˆ†ç±»" aria-hidden="true">#</a> Vue3 API åˆ†ç±»</h2><p><strong>é€‰é¡¹å¼ API (Options API)</strong></p><p>è¿™ç±» API ä¸»è¦æ˜¯åŸæ¥ vue2 é‡Œçš„ä¸€äº› API, å¦‚ watch, computed å†™åœ¨ export default é‡Œé¢çš„</p><p><strong>ç»„åˆå¼ API (Composition API)</strong></p><p>è¯¥ç±» API æ˜¯æŒ‡ vue3 å¯ä»¥æŠ½ç¦»å‡ºæ¥çš„ API, å¦‚ setup é‡Œé¢çš„ watchã€watchEffectã€computed</p><h2 id="æ€§èƒ½ä¸Šçš„ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½ä¸Šçš„ä¼˜åŒ–" aria-hidden="true">#</a> æ€§èƒ½ä¸Šçš„ä¼˜åŒ–</h2><p><strong>diff ç®—æ³•ä¼˜åŒ–</strong></p><p><strong>é™æ€æå‡</strong></p><p><strong>äº‹ä»¶ç›‘å¬ç¼“å­˜</strong></p><p>é»˜è®¤æƒ…å†µä¸‹ â€œç»‘å®šäº‹ä»¶â€ ä¼šè¢«è§†ä¸ºåŠ¨æ€ç»‘å®šï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½ä¼šè¿½è¸ªä»–çš„å˜åŒ–ã€‚ä½†æ˜¯å‡½æ•°è¿˜æ˜¯åŒä¸€ä¸ªå‡½æ•°æ‰€ä»¥æ²¡å¿…è¦è¿½è¸ªï¼Œç›´æ¥ç¼“å­˜èµ·æ¥å¤ç”¨å°±å¥½äº†ï¼Œè¿™å°±æ˜¯æ‰€è¯´çš„äº‹ä»¶ç›‘å¬ç¼“å­˜</p><p><strong>SSR ä¼˜åŒ–</strong></p>`,53);function g(b,h){const t=o("ExternalLinkIcon");return l(),c("div",null,[r,n("p",null,[n("a",d,[s("vue2.xä¸­Watch å’Œ vue3.xä¸­Watchä½¿ç”¨å’ŒåŒºåˆ«"),p(t)])]),k,n("p",null,[s("[Vue2ã€Vue3 ä¸­ computed çš„ä½¿ç”¨ä¸ä¸åŒ ]("),n("a",v,[s("https://www.cnblogs.com/web-learn/p/15601335.html#:~:text=åœ¨vue2ä¸­ï¼Œcomputed"),p(t)]),s(" å†™æ³•ï¼š computed%3A { sum () {,return this.num1%2B this.num2 } } åœ¨vue3 å¦‚æœä½¿ç”¨é€‰é¡¹å¼APIä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼Œä¸»è¦çœ‹ä¸‹ç»„åˆå¼APIçš„ä½¿ç”¨ã€‚)")]),m])}const q=e(u,[["render",g],["__file","Vue3-vs-Vue2.html.vue"]]);export{q as default};
